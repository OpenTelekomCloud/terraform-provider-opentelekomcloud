---
- job:
    name: golang-make-test
    parent: golang-make
    vars:
      make_command: test

- job:
    name: golang-make-vet
    parent: golang-make
    vars:
      make_command: vet

- job:
    name: golang-make-website-test
    parent: golang-make
    vars:
      make_command: website-test
      make_env:
        GOPATH: "{{ ansible_user_dir }}/go"

- project:
    merge-mode: squash-merge
    check:
      jobs:
        - golang-make-test
        - golang-make-vet
        - golang-make-website-test
    gate:
      jobs:
        - golang-make-test
        - golang-make-vet
        - golang-make-website-test
